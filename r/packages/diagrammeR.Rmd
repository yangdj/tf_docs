## DiagrammeR

you can visit the following sites for details:

* [DiagrammeR-github](https://github.com/rich-iannone/DiagrammeR)
* [DiagrammeR-docs](http://rich-iannone.github.io/DiagrammeR/docs.html)
* [mermaid-docs](https://mermaidjs.github.io/)


```{r setup, include = FALSE}
    library(DiagrammeR)
    library(dplyr)
```

### flowchart

node directions:

* TB,TD - top bottome
* BT - bottom top
* RL - right left
* LR - left right

node shapes:

* id[start now] - rectangle
* id(start now) - with round edges
* id((start now)) - circle
* id>start now] - asymmetric
* id{start now} - rhombus

node links:

* `-->` - arrow head
* `---` - open link
* `a-- this is the text ---b` or `a---|this is the text|b`- text on open links
* `a-- this is the text -->b` or `a-->|this is the text|b`- text on arrow head links
* `a-.->b` - dotted
* `a-. text .->` - dotted with text
* `a ==> b` - thick link
* `a == text ==> b` - thick link with text

subgraphs:

    subgraph title
        graph definition
    end




```{r example}
    DiagrammeR("graph TB
                    id1[start now] -- arrow head --> rectangle
                    id2(start now) -- open link --- round
                    id3((start now)) -. dotted .-> circle
                    id4>start now] == thick link ==> asymmetric
                    id5{start now} --> rhombus
               ")

```

### graphviz

graph:

* layout:
    * dot
    * neato
    * twopi
    * circo
* rankdir:
    * LR
    * TB
* overlap:
    true
    false

node attributes:

* color - provide an X11 or hexadecimal color (append 2 digits to hex for alpha)
* fillcolor
* fontcolor
* alpha
* fontname
* fontsize
* shape
    * oval - default
    * square
    * box
    * circle
    * diamond
    * egg
    * plaintext
    * point
    * triangle
    * polygon
* style - usually given the value filled if you'd like to fill a node with a colors
    * filled
* penwidth
* sides - if `shape = polygon`, the number of sides can be provided here
* distortion - the node distortion for any `shape = polygon`
* peripheries - the number of peripheries (essentially, additional shape outlines)
* fixedsize
    * true
    * false
* x - the x position of the node (requires graph attr layout = neato to use)
* y - the y position of the node (requires graph attr layout = neato to use)
* height
* width
* tooltip
* icon

edge attributes:

* arrowsize
* arrowhead
    * normal - default
    * box
    * crow
    * curve
    * diamond
    * dot
    * inv
    * none
    * tee
    * vee
* arrowtail
* color
* dir - direction
    * forward
    * back
    * both
    * none
* alpha
* headport
* tailport
* fontname
* fontsize
* fontcolor
* label - label text for the line between nodes
* penwidth
* minlen - minimum rank distance between head and tail
* tooltip

```{r}
    grViz("
          digraph boxes_and_circles {
            # a 'graph' statement
            graph [overlap = true, fontsize = 10]
            
            node [shape = box,
                  fontname = Helvetica]
            A; B; C; D; E; F
            
            node [shape = circle,
                  fixedsize = true,
                  width = 0.9]
            1; 2; 3; 4; 5; 6; 7; 8

            A->1 B->2 B->3 B->4 C->A
            1->D E->A 2->4 1->5 1->F
            E->6 4->6 5->7 6->7 3->8
          }
          ")
```

```{r}
    grViz("
          digraph nicegraph {
            graph [compound = true, nodesep = .5, ranksep = .25,
                    color = crimson]
            
            node [fontname = Helvetica, fontcolor = darkslategray
                    shape = rectangle, fixedsize = true, width = 1,
                    color = darkslategray]

            edge [color = grey, arrowhead = none, arrowtail = none]

            subgraph cluster0 {
                node [fixedsize = true, width = 3]
                '@@1-1' -> '@@1-2' -> '@@1-3' -> '@@1-4'
                '@@1-4' -> '@@1-5' -> '@@1-6' -> '@@1-7'
            }

            subgraph cluster1 {
                node [fixedsize = true, width = 3]
                '@@2' -> '@@3'
            }

            information [width = 1.5]
            information -> R
            information -> RStudio
            R -> '@@1-1' [lhead = cluster0]
            RStudio -> '@@2' [lhead = cluster1]
          }

[1]: paste0(names(R.Version())[1:7], ':\\n ', R.Version()[1:7])
[2]: paste0('RStudio version:\\n ', rstudioapi::versionInfo()$version)
[3]: paste0('Current program mode:\\n ', rstudioapi::versionInfo()[[2]])
          ")
```

```{r nodes}
node1 <- 
    create_node_df(
        n = 4,
        type = "lower",
        label = c(2384, 3942, 8362, 2194),
        style = "filled",
        color = "aqua",
        shape = c("circle", "circle", "rectangle", "rectangle"),
        data = c(3.5, 2.6, 9.4, 2.7)
    )

node2 <- 
    create_node_df(
        n = 4,
        type = "upper",
        label = as.character(1:4),
        style = "filled",
        color = "red",
        shape = "triangle",
        data = c(0.5, 3.9, 3.7, 8.2)
    )

edge1 <- 
    create_edge_df(
        from = c(1, 1, 2, 3),
        to = c(2, 4, 4, 1),
        rel = "requires",
        color = "green",
        data = c(2.7, 8.9, 2.6, 0.6)
    )

edge2 <-
    create_edge_df(
        from = c(5, 7, 8, 8),
        to = c(7, 8, 6, 5),
        rel = "receives",
        arrowhead = "dot",
        color = "red"
    )

node1 <- create_node_df(
    n = 10,
    type="n1",
    label = TRUE
)

edge1 <- create_edge_df(
    from = 1:9,
    to = 2:10,
    rel = "edge1"
)

graph1 <- 
    create_graph(
        nodes_df = node1,
        edges_df = edge1
    )

node2 <-
    create_node_df(
        n = 10,
        type="node2",
        label=as.character(11:20)
    )

edge2 <- 
    create_edge_df(
        from = 1:9,
        to = 2:10,
        rel="edge2"
    )

graph2 <- 
    create_graph(
        nodes_df = node2,
        edges_df = edge2
    )

extra_edge <- 
    create_edge_df(
        from = c(5, 19, 1),
        to = c(12, 3, 11),
        rel = "extra"
    )
```
