<mxfile host="51ea4edb-3469-47a3-96b3-26f9309685f3" modified="2020-08-17T12:41:36.560Z" agent="5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.47.3 Chrome/78.0.3904.130 Electron/7.3.2 Safari/537.36" etag="9lLr012vjY4bmuo75P0h" version="13.1.3" pages="8">
    <diagram id="XEAWAZAWPxnJUcbV6sG3" name="db">
        <mxGraphModel dx="822" dy="163" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2339" pageHeight="3300" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="ek6_FsmLOM7s2_KUikUs-1" value="" style="swimlane;html=1;startSize=20;horizontal=1;containerType=tree;fillColor=none;strokeColor=none;" parent="1" vertex="1">
                    <mxGeometry x="30" y="130" width="670" height="380" as="geometry"/>
                </mxCell>
                <mxCell id="ek6_FsmLOM7s2_KUikUs-2" value="" style="edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;" parent="ek6_FsmLOM7s2_KUikUs-1" source="ek6_FsmLOM7s2_KUikUs-6" target="ek6_FsmLOM7s2_KUikUs-7" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ek6_FsmLOM7s2_KUikUs-6" value="db" style="ellipse;whiteSpace=wrap;html=1;align=center;container=1;recursiveResize=0;treeFolding=1;treeMoving=1;" parent="ek6_FsmLOM7s2_KUikUs-1" vertex="1">
                    <mxGeometry x="10" y="140" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="ek6_FsmLOM7s2_KUikUs-7" value="postgresql" style="whiteSpace=wrap;html=1;rounded=1;arcSize=23;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;treeMoving=1;" parent="ek6_FsmLOM7s2_KUikUs-1" vertex="1">
                    <mxGeometry x="130" y="10" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-1" value="" style="edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;" parent="ek6_FsmLOM7s2_KUikUs-1" source="ek6_FsmLOM7s2_KUikUs-6" target="VdFFoIohoWg8-c-IuT1M-2" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="140" y="220" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-2" value="mariadb" style="whiteSpace=wrap;html=1;rounded=1;arcSize=13;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;treeMoving=1;" parent="ek6_FsmLOM7s2_KUikUs-1" vertex="1">
                    <mxGeometry x="130" y="80" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-3" value="" style="edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;" parent="ek6_FsmLOM7s2_KUikUs-1" source="ek6_FsmLOM7s2_KUikUs-6" target="VdFFoIohoWg8-c-IuT1M-4" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="140" y="220" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-4" value="redis" style="whiteSpace=wrap;html=1;rounded=1;arcSize=20;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;treeMoving=1;" parent="ek6_FsmLOM7s2_KUikUs-1" vertex="1">
                    <mxGeometry x="130" y="145" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-5" value="" style="edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;" parent="ek6_FsmLOM7s2_KUikUs-1" source="ek6_FsmLOM7s2_KUikUs-6" target="VdFFoIohoWg8-c-IuT1M-6" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="140" y="220" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-6" value="rabbitmq" style="whiteSpace=wrap;html=1;rounded=1;arcSize=20;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;treeMoving=1;" parent="ek6_FsmLOM7s2_KUikUs-1" vertex="1">
                    <mxGeometry x="130" y="210" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-7" value="" style="edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;" parent="ek6_FsmLOM7s2_KUikUs-1" source="ek6_FsmLOM7s2_KUikUs-6" target="VdFFoIohoWg8-c-IuT1M-8" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="140" y="220" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="VdFFoIohoWg8-c-IuT1M-8" value="ldap" style="whiteSpace=wrap;html=1;rounded=1;arcSize=17;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;treeMoving=1;" parent="ek6_FsmLOM7s2_KUikUs-1" vertex="1">
                    <mxGeometry x="130" y="280" width="100" height="30" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="bLB-15KIItHZLIwzvUtw" name="install">
        &#xa;        
        <mxGraphModel dx="822" dy="302" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            &#xa;            
            <root>
                &#xa;                
                <mxCell id="r4bx7zmuQvU5lQe_M6j6-0"/>
                &#xa;                
                <mxCell id="r4bx7zmuQvU5lQe_M6j6-1" parent="r4bx7zmuQvU5lQe_M6j6-0"/>
                &#xa;                
                <mxCell id="QrZE1w03IrAIoicb0JWs-0" value="&lt;table cellpadding=&quot;4&quot; cellspacing=&quot;0&quot; border=&quot;1&quot; style=&quot;font-size: 1em ; width: 100% ; height: 100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;db&lt;/th&gt;&lt;th&gt;install&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;postgresql&lt;/td&gt;&lt;td&gt;&lt;h3&gt;dependencies&lt;/h3&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;yum install bison systemd-devel&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;bison - &lt;/font&gt;compile dept&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;systemd-devel -&amp;nbsp;&lt;/font&gt;for&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;--with-systemd&lt;/font&gt;&amp;nbsp;compile option&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/div&gt;&lt;h3&gt;install&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;PG_VERSION=10.5&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;PG_CHECKOUT=10_5&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;h4&gt;1. source from git&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;git clone git://git.postgresql.org/git/postgresql.git&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;git checkout REL${PG_CHECKOUT}&lt;/font&gt;&lt;/div&gt;&lt;h4&gt;2. source from tar&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;wget https://ftp.postgresql.org/pub/source/v${PG_VERSION}/postgresql-${PG_VERSION}.tar.gz&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;tar xf postgresql-${PG_VERSION}.tar.gz&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;h3&gt;3. compile&lt;/h3&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;// &lt;/font&gt;&lt;span&gt;&lt;font face=&quot;Courier New&quot;&gt;/usr/local/pgsql default&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;./configure --with-systemd &amp;amp;&amp;amp; make &amp;amp;&amp;amp; sudo make install&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;mariadb&lt;/td&gt;&lt;td&gt;&lt;h3&gt;dependencies&lt;/h3&gt;&lt;h4&gt;1. &lt;font face=&quot;Courier New&quot;&gt;MariaDB.repo&lt;/font&gt;&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;# MariaDB 10.3 CentOS repository list&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;# http://downloads.mariadb.org/mariadb/repositories/&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;[mariadb] name = MariaDB&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;baseurl = http://yum.mariadb.org/10.3/centos7-amd64&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;gpgcheck=1&lt;/font&gt;&lt;/div&gt;&lt;h4&gt;2. install repo&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;cp MariaDB.repo /etc/yum.repos.d/&lt;/font&gt;&lt;/div&gt;&lt;h3&gt;install&lt;/h3&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo yum install MariaDB-server MariaDB-client&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;h3&gt;dependencies&lt;/h3&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;sudo yum install tcl&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;tcl&amp;gt;=8.5 - &lt;/font&gt;for &lt;font face=&quot;Courier New&quot;&gt;make test&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;h3&gt;install&lt;/h3&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;REDIS_VERSION=5.0.2&lt;/font&gt;&lt;/div&gt;&lt;h4&gt;1. source from tar&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;wget http://download.redis.io/releases/redis-${REDIS_VERSION}.tar.gz&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;h4&gt;2. compile&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;cd redis-${REDIS_VERSION}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;make &amp;amp;&amp;amp; make test &amp;amp;&amp;amp; sudo make install&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;rabbitmq&lt;/td&gt;&lt;td&gt;&lt;h4&gt;dependencies&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;wget https://packages.erlang-solutions.com/erlang-solutions-1.0-1.noarch.rpm&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo rpm -Uvh erlang-solutions-1.0-1.noarch.rpm&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo yum install erlang socat&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;erlang&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;socat&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3&gt;install&lt;/h3&gt;&lt;/div&gt;&lt;h4&gt;1. source from rpm&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;wget https://dl.bintray.com/rabbitmq/all/rabbitmq-server/3.7.4/rabbitmq-server-3.7.4-1.el7.noarch.rpm&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo rpm -ivh rabbitmq-server-3.7.4-1.el7.noarch.rpm&lt;/font&gt;&lt;/div&gt;&lt;h4&gt;2. systemd&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo systemctl enable rabbitmq-server&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo systemctl start rabbitmq-server&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;h3&gt;command&lt;/h3&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo rabbitmq-plugins enable rabbitmq_management&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo rabbitmqctl add_user myroot myroot_password&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;sudo rabbitmqctl add_vhost myvhost&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo rabbitmqctl set_user_tags myroot administrator&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;sudo rabbitmqctl set_permissions -p myvhost myairflow &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ldap&lt;/td&gt;&lt;td&gt;&lt;h3&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em ; font-weight: normal&quot;&gt;yum install -y openldap openldap-clients openldap-servers&lt;/span&gt;&lt;br&gt;&lt;/h3&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; " style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1" parent="r4bx7zmuQvU5lQe_M6j6-1" vertex="1">
                    &#xa;                    
                    <mxGeometry x="10" y="10" width="810" height="1650" as="geometry"/>
                    &#xa;                
                </mxCell>
                &#xa;            
            </root>
            &#xa;        
        </mxGraphModel>
        &#xa;    
    </diagram>
    <diagram id="MZl-0G_3J4n7ubKzjTsD" name="postgresql-config">
        &#xa;        &#xa;        &#xa;        
        <mxGraphModel dx="852" dy="480" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            &#xa;            &#xa;            &#xa;            
            <root>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="qboDq4KB_rDDjDLmzWdt-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="qboDq4KB_rDDjDLmzWdt-1" parent="qboDq4KB_rDDjDLmzWdt-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="3EabGpNVO0xEp7qCi5JD-0" value="&lt;table cellpadding=&quot;4&quot; cellspacing=&quot;0&quot; border=&quot;1&quot; style=&quot;font-size: 1em ; width: 100% ; height: 100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;config&lt;/th&gt;&lt;th&gt;contents&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;basic&lt;/td&gt;&lt;td&gt;&lt;h3&gt;add user postgres&lt;/h3&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo adduser postgres -M # &lt;/font&gt;no need not create home directory&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo passwd postgres&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo usermod -d /usr/local/pgsql postgres&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo chown -R postgres: /usr/local/pgsql&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/font&gt;&lt;h3&gt;initial postgres&lt;/h3&gt;&lt;h4&gt;1. specify and create direcitories&lt;/h4&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;PGDATA_HOME=/pg/data/home/dir&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;PGLOG_HOME=${PGDATA_HOME}/logdir&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;mkdir ${PGDATA_HOME} ${PGLOG_HOME}&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;h4&gt;2. initial PGDATA&lt;/h4&gt;&lt;div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;PGDATA=${PGDATA_HOME}/data&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo chown -R postgres: ${PGDATA_HOME}&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;su - postgres -c '/usr/local/pgsql/bin/initdb -D &lt;b&gt;${PGDATA}&lt;/b&gt;&amp;nbsp;--locale=zh_CN.UTF8'&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h4&gt;3. start server&lt;/h4&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;LOGFILE=${PGLOG_HOME}/log&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;PGPORT=5432(default)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;3.1 &lt;font face=&quot;Courier New&quot;&gt;pg_ctl&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;/usr/local/pgsql/bin/pg_ctl start -D ${PGDATA} -o &quot;-p ${PGPORT}&quot; -l ${LOGFILE}&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;/usr/local/pgsql/bin/pg_ctl stop -D ${PGDATA}&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;/usr/local/pgsql/bin/pg_ctl restart -D ${PGDATA} -o &quot;-p ${PGPORT}&quot;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;/usr/local/pgsql/bin/pg_ctl reload -D ${PGDATA}&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;/usr/local/pgsql/bin/pg_ctl status-D ${PGDATA}&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;3.2 &lt;font face=&quot;Courier New&quot;&gt;systemctl&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;sudo systemctl start postgresql.service&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;h4&gt;4. firewall&lt;/h4&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo firewall-cmd --permanent --add-service=postgresql&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo systemctl reload firewalld&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;h3&gt;config files&lt;/h3&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;postgresql.conf&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;pg_hba.conf&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;postgresql.service&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;postgresql.conf&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;listen_addresses = '*'&lt;br&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;pg_hba.conf&lt;/td&gt;&lt;td&gt;# local for Unix domain socket connections only&lt;br&gt;# before start postgre, sets local login to &lt;font face=&quot;Courier New&quot;&gt;trust&lt;/font&gt;;&amp;nbsp;after login, alter user password, then changes &lt;font face=&quot;Courier New&quot;&gt;trust&lt;/font&gt; back to &lt;font face=&quot;Courier New&quot;&gt;md5&lt;/font&gt;&lt;br&gt;#&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;alter user postgres with password your-password&lt;/font&gt;&lt;br&gt;&lt;font face=&quot;Courier New&quot;&gt;local&amp;nbsp; &amp;nbsp;all&amp;nbsp; &amp;nbsp; &amp;nbsp;all&amp;nbsp; &amp;nbsp; &amp;nbsp;md5&lt;br&gt;&lt;/font&gt;# IPv4 connections,&amp;nbsp;allow remote access&lt;br&gt;&lt;font face=&quot;Courier New&quot;&gt;host&amp;nbsp; &amp;nbsp; all&amp;nbsp; &amp;nbsp; &amp;nbsp;all&amp;nbsp; &amp;nbsp; &amp;nbsp;0.0.0.0/0&amp;nbsp; &amp;nbsp;md5&lt;br&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;postgresql.service&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;[Unit]&lt;br&gt;Description=PostgreSQL database server&lt;br&gt;After=network.target&lt;br&gt;&lt;br&gt;[Service]&lt;br&gt;Type=forking&lt;br&gt;# Type=notify&lt;/font&gt;,&amp;nbsp;use&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;type=forking&lt;/font&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;&amp;nbsp;when&amp;nbsp;&lt;font face=&quot;Courier New&quot;&gt;type=notify&lt;/font&gt;&amp;nbsp;fails&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;&lt;br&gt;User=postgres&lt;br&gt;Environment=PGPORT=5432&lt;br&gt;Environment=PGDATA=/server/proj/database/pgsql/data&lt;br&gt;Environment=LOGFILE=/server/proj/database/pgsql/logs/log&lt;br&gt;&lt;br&gt;ExecStart=/usr/local/pgsql/bin/pg_ctl start -D ${PGDATA} -o &quot;-p ${PGPORT}&quot; -l ${LOGFILE}&lt;br&gt;ExecReload=/usr/bin/kill -HUP $MAINPID &lt;br&gt;KillMode=mixed&lt;br&gt;KillSignal=SIGINT&lt;br&gt;TimeoutSec=0&lt;br&gt;&lt;br&gt;[Install]&lt;br&gt;WantedBy=multi-user.target&lt;/font&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; " style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1" parent="qboDq4KB_rDDjDLmzWdt-1" vertex="1">
                    &#xa;                    &#xa;                    &#xa;                    
                    <mxGeometry x="9" y="5" width="810" height="1275" as="geometry"/>
                    &#xa;                    &#xa;                &#xa;                
                </mxCell>
                &#xa;                &#xa;            &#xa;            
            </root>
            &#xa;            &#xa;        &#xa;        
        </mxGraphModel>
        &#xa;        &#xa;    &#xa;    
    </diagram>
    <diagram id="jf4Blp6gfeZ5dQbqAhrO" name="postgresql-cmd">
        <mxGraphModel dx="822" dy="163" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="ZllXQ3NyDgBaxxRZ2FOO-0"/>
                <mxCell id="ZllXQ3NyDgBaxxRZ2FOO-1" parent="ZllXQ3NyDgBaxxRZ2FOO-0"/>
                <mxCell id="VvD-qR521weWtW7xJaip-0" value="&lt;table cellpadding=&quot;4&quot; cellspacing=&quot;0&quot; border=&quot;1&quot; style=&quot;font-size: 1em ; width: 100% ; height: 100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;command&lt;/th&gt;&lt;th&gt;contents&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;user&lt;br&gt;&lt;/td&gt;&lt;td&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;create role airflow login password 'airflow'&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;database&lt;/td&gt;&lt;td&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;create database airflow owner airflow&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;create schema airflow authorization airflow &lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;alter user airflow set search_path=airflow,public&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;shell&lt;/td&gt;&lt;td&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;\c dbname - &lt;/font&gt;swiches to dbname&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;\du - &lt;/font&gt;lists roles&lt;/li&gt;&lt;/ol&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; " style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1" parent="ZllXQ3NyDgBaxxRZ2FOO-1" vertex="1">
                    <mxGeometry x="10" y="10" width="630" height="220" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="qs0QUAytXHS2nKGxKQSG" name="mariadb-config">
        &#xa;        &#xa;        &#xa;        
        <mxGraphModel dx="852" dy="480" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            &#xa;            &#xa;            &#xa;            
            <root>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="29MXGs88AO1VGB2FE-rs-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="29MXGs88AO1VGB2FE-rs-1" parent="29MXGs88AO1VGB2FE-rs-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="451GmTiY2wvtwt0KklQe-0" value="&lt;table cellpadding=&quot;4&quot; cellspacing=&quot;0&quot; border=&quot;1&quot; style=&quot;font-size: 1em ; width: 100% ; height: 100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;config&lt;/th&gt;&lt;th&gt;contents&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;basic&lt;/td&gt;&lt;td&gt;&lt;h3&gt;initial mariadb&lt;/h3&gt;&lt;h4&gt;1. start server&lt;/h4&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;sudo systemctl start mariadb.service&lt;/span&gt;&lt;br&gt;&lt;h4&gt;2. secure config&lt;/h4&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;mysql_secure_installation&lt;/span&gt;&lt;/div&gt;&lt;h4&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;3. change datapath and port optionally&lt;/span&gt;&lt;/h4&gt;&lt;div&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;&lt;font face=&quot;Courier New&quot;&gt;MARIADB_DATA_HOME=/mariadb/home&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;mysql -u root -p -e &quot;select @@datadir, @@port&quot;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo chown -R mysql: ${MARIADB_DATA_HOME}&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo cp -R -p /var/lib/mysql/* ${MARIADB_DATA_HOME}&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;may need selinux settings for centos:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo semanage fcontext -a -t mysqld_db_t &quot;${&lt;/font&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;MARIADB_DATA_HOME&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;}(/.*)?&quot;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo restorecon -R ${&lt;/font&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;MARIADB_DATA_HOME&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;}&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;h4&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;4. change port optionally&lt;/span&gt;&lt;/h4&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;MARIADB_PORT=3308(3306 default)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;config file&amp;nbsp;&lt;/span&gt;&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 1em&quot;&gt;/etc/my.cnf.d/server.cnf&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;may need additional settings:&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo yum install policycoreutils-python&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo semanage port -a -t mysqld_port_t -p tcp ${MARIADB_PORT}&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;h3&gt;config files&lt;/h3&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;courier new&quot;&gt;/etc/my.cnf&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;courier new&quot;&gt;/etc/my.cnf.d/server.cnf&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;courier new&quot;&gt;~/.my.cnf&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;/etc/my.cnf&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;[client-server]&lt;br&gt;&lt;br&gt;[mysqld]&lt;br&gt;datadir=${MARIADB_DATA_HOME}&lt;br&gt;socket=&lt;/font&gt;${&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;MARIADB_DATA_HOME}&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;/mysql.sock&lt;br&gt;&lt;br&gt;[client]&lt;br&gt;socket=&lt;/font&gt;${&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;MARIADB_DATA_HOME}&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;/mysql.sock&lt;br&gt;&lt;br&gt;!includedir /etc/my.cnf.d&lt;/font&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;/etc/my.cnf.d/server.cnf&lt;br&gt;&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;[mysqld]&lt;br&gt;port=3308&lt;/font&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;~/.my.cnf&lt;br&gt;&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;[clienthost1] # or [client]&lt;/font&gt;&lt;br style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;host=localhost&lt;br&gt;&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;port=port&lt;br&gt;socket=/tmp/mysql.sock&lt;br&gt;&lt;/font&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;database=dbname&lt;/span&gt;&lt;font face=&quot;Courier New&quot;&gt;&lt;br&gt;user=username&lt;br&gt;password=passwd&lt;br&gt;&lt;br&gt;[clienthost2]&lt;br&gt;...&lt;br&gt;&lt;br&gt;# connect to mysql&lt;br&gt;#&amp;nbsp;mysql --defaults-group-suffix=host1&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; " style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1" parent="29MXGs88AO1VGB2FE-rs-1" vertex="1">
                    &#xa;                    &#xa;                    &#xa;                    
                    <mxGeometry x="19" y="15" width="771" height="1045" as="geometry"/>
                    &#xa;                    &#xa;                &#xa;                
                </mxCell>
                &#xa;                &#xa;            &#xa;            
            </root>
            &#xa;            &#xa;        &#xa;        
        </mxGraphModel>
        &#xa;        &#xa;    &#xa;    
    </diagram>
    <diagram id="DSATgfqD7Z32CIduniQ1" name="mariadb-cmd">
        &#xa;        &#xa;        &#xa;        
        <mxGraphModel dx="852" dy="480" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            &#xa;            &#xa;            &#xa;            
            <root>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="ZN6FDCZ_Gpi1RWRekCws-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="ZN6FDCZ_Gpi1RWRekCws-1" parent="ZN6FDCZ_Gpi1RWRekCws-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="ZN6FDCZ_Gpi1RWRekCws-2" value="&lt;table cellpadding=&quot;4&quot; cellspacing=&quot;0&quot; border=&quot;1&quot; style=&quot;font-size: 1em ; width: 100% ; height: 100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;command&lt;/th&gt;&lt;th&gt;contents&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;database&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;create database flow default character set utf8 default collate utf8_bin&lt;br&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;user&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;create user flow identified by 'flow'&lt;/font&gt;;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;privilege&lt;/span&gt;&lt;br&gt;&lt;/td&gt;&lt;td&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;grant all privileges on flow.* to 'flow'@'%'&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;flush privileges&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;show grants for 'flow'&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; " style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1" parent="ZN6FDCZ_Gpi1RWRekCws-1" vertex="1">
                    &#xa;                    &#xa;                    &#xa;                    
                    <mxGeometry x="10" y="10" width="640" height="160" as="geometry"/>
                    &#xa;                    &#xa;                &#xa;                
                </mxCell>
                &#xa;                &#xa;            &#xa;            
            </root>
            &#xa;            &#xa;        &#xa;        
        </mxGraphModel>
        &#xa;        &#xa;    &#xa;    
    </diagram>
    <diagram id="xYzebbG3YqSb4Mc0uyl1" name="redis-config">
        &#xa;        &#xa;        &#xa;        
        <mxGraphModel dx="852" dy="480" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            &#xa;            &#xa;            &#xa;            
            <root>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="r9fxNbn0moQk2Eb3bH_6-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="r9fxNbn0moQk2Eb3bH_6-1" parent="r9fxNbn0moQk2Eb3bH_6-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="gzwgvk20JJHIbi_nv1Y5-0" value="&lt;table cellpadding=&quot;4&quot; cellspacing=&quot;0&quot; border=&quot;1&quot; style=&quot;font-size: 1em ; width: 100% ; height: 100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;config&lt;/th&gt;&lt;th&gt;contents&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;basic&lt;/td&gt;&lt;td&gt;&lt;h3&gt;add user redis&lt;/h3&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;REDIS_HOME=/REDIS/HOME&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;REDIS_DATA_HOME=${REDIS_HOME}/data&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo adduser redis -M&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo passwd redis&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;mkdir -p ${REDIS_HOME} ${REDIS_DATA_HOME}&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo chown -R redis: ${REDIS_HOME}&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;sudo usermod -d ${MY_REDIS_HOME} redis&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3&gt;config files&lt;/h3&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;cp redis.conf /etc/redis/redis.conf&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Courier New&quot;&gt;cp redis.service /&lt;/font&gt;&lt;span&gt;&lt;font face=&quot;Courier New&quot;&gt;usr/lib/systemd/system/&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;redis.conf&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;daemonize yes &lt;br&gt;supervised systemd &lt;br&gt;dir ${REDIS_DATA_HOME}&amp;nbsp;&lt;br&gt;tcp-backlog 511 # &lt;/font&gt;change according to system&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;redis.service&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;[Unit]&lt;br&gt;Description=Redis In-Memory Data Store&lt;br&gt;After=network.target&lt;br&gt;&lt;br&gt;[Service]&lt;br&gt;User=redis&lt;br&gt;Group=redis&lt;br&gt;Type=forking&lt;br&gt;ExecStart=/usr/local/bin/redis-server /etc/redis/redis.conf&lt;br&gt;ExecStop=/usr/local/bin/redis-cli shutdown&lt;br&gt;Restart=always&lt;br&gt;&lt;br&gt;[Install]&lt;br&gt;WantedBy=multi-user.target&lt;/font&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;notes&lt;/td&gt;&lt;td&gt;&lt;h3&gt;1.&amp;nbsp;have Transparent Huge Pages support enabled&lt;/h3&gt;&lt;div&gt;execute the following, and then put them into &lt;font face=&quot;Courier New&quot;&gt;/etc/rc.local&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Courier New&quot;&gt;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/defrag&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; " style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1" parent="r9fxNbn0moQk2Eb3bH_6-1" vertex="1">
                    &#xa;                    &#xa;                    &#xa;                    
                    <mxGeometry x="10" y="10" width="700" height="690" as="geometry"/>
                    &#xa;                    &#xa;                &#xa;                
                </mxCell>
                &#xa;                &#xa;            &#xa;            
            </root>
            &#xa;            &#xa;        &#xa;        
        </mxGraphModel>
        &#xa;        &#xa;    &#xa;    
    </diagram>
    <diagram id="1n5NCZ7kqnO2Zj7uNcTF" name="ldap-config">
        &#xa;        &#xa;        &#xa;        
        <mxGraphModel dx="852" dy="480" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            &#xa;            &#xa;            &#xa;            
            <root>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="3iVzXpbfz4fi8MeWtKgZ-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="3iVzXpbfz4fi8MeWtKgZ-1" parent="3iVzXpbfz4fi8MeWtKgZ-0"/>
                &#xa;                &#xa;                &#xa;                
                <mxCell id="FfsMPfPMZELSwQ0Qb_B--0" value="&lt;table cellpadding=&quot;4&quot; cellspacing=&quot;0&quot; border=&quot;1&quot; style=&quot;font-size: 1em ; width: 100% ; height: 100%&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;config&lt;/th&gt;&lt;th&gt;contents&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;basic&lt;/td&gt;&lt;td&gt;&lt;h3&gt;update password&lt;/h3&gt;&lt;h4&gt;1.&amp;nbsp;&lt;span style=&quot;font-size: 1em&quot;&gt;generates password&lt;/span&gt;&lt;/h4&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;slappasswd&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;h4&gt;&lt;font face=&quot;Courier New&quot;&gt;2.&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;update the&amp;nbsp;&lt;/span&gt;&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 1em&quot;&gt;olcRootPW&lt;/font&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;&amp;nbsp;value from &quot;1&quot; in&amp;nbsp;&lt;/span&gt;&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 1em&quot;&gt;config.ldif&lt;/font&gt;&lt;font style=&quot;font-size: 1em&quot;&gt;, &lt;/font&gt;&lt;font face=&quot;Courier New&quot; style=&quot;font-size: 1em&quot;&gt;then&lt;/font&gt;&lt;/h4&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34; ; font-size: 1em&quot;&gt;sudo ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f config.ldif&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;h3&gt;&lt;span style=&quot;font-size: 1em&quot;&gt;import schema&lt;/span&gt;&lt;/h3&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;for i in /etc/openldap/schema/*.ldif; do sudo ldapadd -Y EXTERNAL -H ldapi:/// -f $i;done&lt;/span&gt;&lt;/div&gt;&lt;h3&gt;test&lt;/h3&gt;&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;courier new&amp;#34;&quot;&gt;sudo slaptest -u&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;config.ldif&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;dn: olcDatabase={2}hdb,cn=config&lt;br&gt;changetype: modify&lt;br&gt;replace: olcRootDN &lt;br&gt;olcRootDN: cn=admin,dc=zn,dc=com&lt;br&gt;-&lt;br&gt;replace: olcSuffix&lt;br&gt;olcSuffix: dc=zn,dc=com&lt;br&gt;-&lt;br&gt;replace: olcRootPW&lt;br&gt;olcRootPW: {SSHA}tx82Ps6erbeIFzR08Go7oeOjATkLxSuw&lt;br&gt;&lt;br&gt;dn: olcDatabase={1}monitor,cn=config&lt;br&gt;changetype: modify&lt;br&gt;replace: olcAccess&lt;br&gt;olcAccess: {0}to * by dn.base=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot;&lt;br&gt;&amp;nbsp; read by dn.base=&quot;cn=admin,dc=zn,dc=com&quot; read by * none&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;command&lt;/td&gt;&lt;td&gt;&lt;font face=&quot;Courier New&quot;&gt;ldapadd -x -W -D &quot;cn=admin,dc=zn,dc=com&quot; -f base.ldif&lt;br&gt;ldapsearch -x -W -D &quot;cn=admin,dc=zn,dc=com&quot; -b &quot;dc=zn,dc=com&quot; &quot;(objectclass=*)&quot;&lt;/font&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; " style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1" vertex="1" parent="3iVzXpbfz4fi8MeWtKgZ-1">
                    &#xa;                    &#xa;                    &#xa;                    
                    <mxGeometry x="10" y="10" width="810" height="610" as="geometry"/>
                    &#xa;                    &#xa;                &#xa;                
                </mxCell>
                &#xa;                &#xa;            &#xa;            
            </root>
            &#xa;            &#xa;        &#xa;        
        </mxGraphModel>
        &#xa;        &#xa;    &#xa;    
    </diagram>
</mxfile>