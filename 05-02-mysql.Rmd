# MySQL

1. reset password
    1. `/etc/mysqld`, add `skip-grant-tables` under `[mysqld]` part
    2. restart mysql server
    3. `mysql -uroot -p` login the server
    4. `update mysql.user set authentication_string=password('*****') where user='root'`
    5. remove `skip-grant-tables` content
    6. restart the server
2. open binlog
    1. `/etc/my.cnf`: for 5.7
        1. `[mysqld]`
            1. `server-id=<1>`: 5.7+
            2. `log_bin=mysql-bin`
            3. `binlog_format=row`
            4. `binlog_row_image={<default: FULL>, minimal, noblob}`: use default, only set according to demand, `show variables like 'binlog_row_image'`
            5. `expire_logs_days=10`
            6. `binlog_rows_query_log_events=ON`: make binlog containning original SQL statements
    2. restart MySQL
    3. check: `SELECT variable_value FROM information_schema.global_variables WHERE variable_name='log_bin'`
    4. user access
        1. `CREATE USER 'user'@'localhost' IDENTIFIED BY 'password';`
        2. `GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'user';`
        3. `FLUSH PRIVILEGES;`
3. Command
    1. Grant: `grant <privilege>... on <dbname>.<table> to 'user'@'host'`
    2. Revoke: `revoke <privilege>... on <dbname>.<table> from <user>`
      1. Privileges
        1. `all`
        2. Table Level
            1. `create`
            2. `index`
            3. `alter`
            4. `drop`
            5. `select`
            6. `insert`
            7. `update`
            8. `delete`
        3.  Administrative Level: for the whole database, should use `on *.*`
            1. `create user`
            2. `super`
            3. `shutdown`
            4. `show databases`
            5. `process`
            6. `reload`
                1. `flush privileges`
                2. `flush tables`
                3. `flush logs`
            7. `replication slave`
            8. `replication client`

